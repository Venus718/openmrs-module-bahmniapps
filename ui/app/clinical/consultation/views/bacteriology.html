<div class="bacteriology-container">
    <div ng-repeat="newSpecimen in newSpecimens track by $index" class="sample-container">
        <form class="form">
            <section class="section-grid">
                <div class="section-title-wrapper clearfix">
                    <h2 class="section-title fl">{{'BACTERIOLOGY_TAB_TITLE_KEY' | translate}}</h2>
                    <input type="button" value="{{'BACTERIOLOGY_BUTTON_CLEAR_KEY' | translate}}"
                           ng-click="clearSpecimen(newSpecimen)" class="fr add-sample-btn">
                </div>


                <div class="box">
                    <section class="form-field-inline">
                        <article class="form-field">
                            <div class="field-attribute">
                                <label for="sample-date">{{'BACTERIOLOGY_SAMPLE_COLLECTION_DATE_KEY' |
                                    translate}}
                                    <span class="asterick">*</span>
                                </label>
                            </div>
                            <div class="field-value">
                                <input id="sample-date" date-converter type="date" ng-model="newSpecimen.dateCollected"
                                       required="required" ng-change="clearEmptySpecimens()">
                            </div>
                        </article>
                    </section>

                    <section class="form-field-inline">
                        <article class="form-field right-form-field">
                            <div class="field-attribute">
                                <label for="sample-type">{{'BACTERIOLOGY_SAMPLE_TYPE_KEY' | translate}}
                                    <span class="asterick">*</span>
                                </label>
                            </div>
                            <div class="field-value">
                                <select required="required" id="sample-type" class="form-field bulk-duration-unit"
                                        ng-model="newSpecimen.type"
                                        ng-options="sample as sample.name for sample in allSamples track by sample.uuid">
                                    <option></option>
                                </select>
                            </div>
                        </article>
                    </section>
                    <section class="form-field-inline">
                        <article class="form-field">
                            <div class="field-attribute">
                                <label for="sample-id">{{'BACTERIOLOGY_SAMPLE_ID_KEY' | translate}} </label>
                            </div>
                            <div class="field-value">
                                <input id="sample-id" type="text" ng-model="newSpecimen.identifier">
                            </div>
                        </article>
                    </section>


                </div>

                <div class="box" ng-if="newSpecimen.dateCollected">
                    <concept-set patient="patient" concept-set-name="additionalAttributesConceptName"
                                 observations="newSpecimen.sample.additionalAttributes"></concept-set>
                </div>

                <div class="box" ng-if="newSpecimen.dateCollected">
                    <concept-set patient="patient" concept-set-name="resultsConceptName" collapse-inner-sections="true"
                                 observations="newSpecimen.report.results"></concept-set>
                </div>
            </section>
        </form>
    </div>
    <div ng-repeat="savedSpecimen in savedSpecimens" class="savedSpecimens-container clearfix">
        <div class="fl savedSpecimens-text">
            <span>{{savedSpecimen.type.name}}</span>
            <span>#{{savedSpecimen.identifier}}</span>
            <span>Added on {{savedSpecimen.dateCollected | date: 'MM/dd/yyyy'}}</span>
        </div>
        <div class="fr savedSpecimens-action">
            <i class="fa fa-pencil" ng-click="editSpecimen(savedSpecimen)"></i>

            <i class="fa fa-remove" ng-confirm-click="deleteSpecimen(savedSpecimen)" confirm-message="Are you sure you want to remove?"></i>
        </div>
    </div>
</div>

