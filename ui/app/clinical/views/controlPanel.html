<div class="patient-control-panel">
    <aside bindonce="patient" class="visit-history" ng-class="{'shift': $parent.showControlPanel}">
        <div class="patient-info">
            <div class="patient-img">
                <img ng-src="{{patient.image}}" onerror="this.onerror=null;this.src='../images/blank-user.gif';">
            </div>
            <h4><span bo-text="patient.name + ' (' + patient.gender + ', ' + patient.age + ')'"></span></h4>
            <h5><span bo-text="patient.identifier + ' (' + patient.address.cityVillage + ')'"
              bo-hide="!patient.address.cityVillage"></span></h5>
            <span class="ward" bo-text="bedDetails.wardName + ' ' + bedDetails.bedNumber"></span>
        </div>

        <h2>Actions</h2>
        <ul>
            <li><a href="" pop-up on-click-handler="getPatientDocuments">Patient Documents</a></li>
            <li ng-click="changeContext($event)" ng-repeat="link in links">
                <a href="{{link.href}}" ng-click="link.onClick($event)">{{link.text}}</a>
            </li>
        </ul>

        <h2>Visit History</h2>
        <ul>
            <li ng-click="changeContext($event)" class="visit-history-entry"
                ng-class="{'selected': isCurrentVisit(visit), 'active': visit.isActive()}"
                ng-repeat="visit in visits">
                <a href="#/patient/{{patient.uuid}}/dashboard/visit/{{visit.uuid}}">
                    <span bo-text="visit.startDatetime | date: 'd MMM yy'"></span>
                    <span bo-text="'- ' + (visit.stopDatetime | date: 'd MMM yy')" bo-hide="visit.isActive()"></span>
                    <i class="icon-star" title="Current Visit"></i>
                </a>
            </li>
        </ul>
    </aside>
</div>