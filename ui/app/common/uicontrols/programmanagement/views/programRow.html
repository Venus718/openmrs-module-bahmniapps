<div class="program-row">
    <div class="program-details">
        <a ng-href="#/patient/{{patient.uuid}}/dashboard" class="big-anchor">{{program.display}}</a>
        <span class="enrolled-info"> (Enrolled on {{program.dateEnrolled | bahmniDate}})</span>

        <div class="program-actions">
            <button ng-click="toggleEdit(program)" ng-class="{'tab-selected': program.editing}" ng-if="hasStates(program.program)">Change State</button>
            <button ng-click="toggleEnd(program)" ng-class="{'tab-selected': program.ending}">End Program</button>
        </div>

        <div ng-if="program.editing" class="program-action-container form">
            <div class="remove-state-container">
                <label class="middle-align">Current State : </label>
                <label class="middle-align current-state-name"><span>{{getCurrentStateDisplayName(program)}}</span></label>
                <button class="small-btn row-remover" ng-confirm-click="removePatientState(program)" confirm-message="Do you want to remove '{{getCurrentStateDisplayName(program)}}'" ng-if="canRemovePatientState(program)" >
                    <span class="fa fa-remove"></span>
                </button>
            </div>
            <label class="middle-align">Change to</label>
            <select ng-model="programEdited.selectedState"
                    ng-options="state.concept.display for state in getWorkflowStatesWithoutCurrent(program) track by state.uuid">
                <option value="">Choose State</option>
            </select>
            <div class="btn-grp fr">
                <button class="retro-widget-button ok_btn" ng-click="savePatientProgram(program)">Save</button>
                <button class="retro-widget-button" ng-click="toggleEdit(program)">Cancel</button>
            </div>
        </div>
        <div ng-if="program.ending" class="program-action-container form">
                <label class="middle-align">Outcomes</label>
                <select ng-model="program.outcomeData"
                        ng-options="outcomeSelected.display for outcomeSelected in getOutcomes(program.program)">
                    <option value="">Choose OutCome</option>
                </select>

            <div class="btn-grp fr">
                <button class="retro-widget-button ok_btn" ng-click="endPatientProgram(program)">Save</button>
                <button class="retro-widget-button ok_btn" ng-click="toggleEnd(program)">Cancel</button>
            </div>
        </div>


    </div>
    <div class="program-timeline" ng-if="program.states.length!=0">
        <timeline program="program"></timeline>
    </div>
</div>