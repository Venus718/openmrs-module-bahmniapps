<div class="document-upload">
    <form class="form-field-inline" ng-submit="save()">
        <div class="form-field">
            <div>
                <label>Visit Type<span class="asterick">*</span></label>
            </div>
            <div class="field-value">
                <select ng-model="newVisit.visitType" ng-options="vt.display for vt in visitTypes" required="">
                    <option value=""></option>
                </select>
            </div>
        </div>
        <div class="form-field">
            <div>
                <label class="form-attribute">Start Date<span class="asterick">*</span></label></div>
            <div class="field-value">
                <input type="text" ng-model="newVisit.startDatetime" datepicker="" required="" class="field-value">
            </div>
        </div>
        <div class="form-field">
            <div>
                <label class="form-attribute">End Date</label></div>
            <div class="field-value">
                <input type="text" ng-model="newVisit.stopDatetime" datepicker="" class="field-value"></div>
        </div>
        <div class="upload-inline-buttons">

            <input id="file-browse" type="file" name="image" accept="image/*" capture="camera" file-upload
                   visit="newVisit" required>

            <button type="button" ng-click="resetCurrentVisit(newVisit)"><label for="file-browse" class="icon-camera">
                SCAN </label></button>
            <button type="submit" ng-click="save(newVisit)" ng-disabled="newVisit.images.length == 0"><label
                    class="icon-save"> SAVE</label></button>
        </div>

        <div>
        <span class="clear" ng-repeat="image in newVisit.images">
                            <img ng-src="{{image.encodedValue}}" width="100">
                            <button class="icon-remove icon-white"
                                    ng-click="newVisit.removeNewAddedImage(image)"></button>
                        </span>
        </div>
    </form>

    <div id="allVisitsDiv" class="clear">
        <div>
            <div ng-repeat="visit in visits">
                <span ng-click="resetCurrentVisit(visit)">{{visit.startDatetime}}</span>
                <span ng-click="resetCurrentVisit(visit)">{{visit.stopDatetime}}</span>

                <div class="upload-inline-buttons">
                    <input id="file-browse-{{visit.uuid}}" type="file" name="image" accept="image/*" capture="camera"
                           required file-upload visit="visit">
                </div>
                <button ng-click="resetCurrentVisit(visit)" type="button"><label for="file-browse-{{visit.uuid}}"
                                                                                 class="icon-camera">
                    SCAN </label></button>
                <button type="submit" ng-disabled="visit.changed == false" ng-click="save(visit)"><label
                        class="icon-save"> SAVE</label></button>
                <div class="clear" ng-if="isCurrentVisit(visit)">
                        <span ng-repeat="image in visit.savedImages">
                                <img ng-src="/document_images/{{image.encodedValue}}" width="100"
                                     ng-class="{true:'transparent', false:'opaque'}[image.voided]"/>
                            <button class="icon-remove icon-white"
                                    ng-click="visit.markAsVoided(image)"></button>
                        </span>

                        <span class="clear" ng-repeat="image in visit.images">
                            <img ng-src="{{image.encodedValue}}" width="100">
                            <button class="icon-remove icon-white"
                                    ng-click="visit.removeNewAddedImage(image)"></button>
                        </span>
                </div>
            </div>
        </div>
    </div>

    <div id="messages">
        <p class="success" ng-show="success"><i class="icon-ok-circle white small"></i>File(s) uploaded successfully</p>
    </div>
</div>
