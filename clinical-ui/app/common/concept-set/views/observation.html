<div class="vitals form-horizontal">
    <fieldset ng-if="!observation.isGroup()">
        <div class="form-group">
            <label class="control-label">
                <span>{{observation.label}}&nbsp;</span>
                <span ng-show="observation.units">({{observation.units}})</span>
            </label>
            <div class="field-value" ng-switch on="observation.getControlType()">
                <input ng-switch-when="html5InputDataType" add-obs-constraints obs="$parent.observation" class="form-control" ng-model="$parent.observation.value" ng-change="$parent.observation.onValueChanged()"
                value="$parent.observation.displayValue()"/>

                <textarea ng-switch-when="text" class="form-control" ng-model="$parent.observation.value"
                          ng-change="$parent.observation.onValueChanged()"
                          value="$parent.observation.displayValue()"></textarea>

                <select ng-switch-when="dropdown" foo-bar class="form-control" ng-model="observation.value" ng-change="observation.onValueChanged()"
                        ng-options="answer as answer.name for answer in getPossibleAnswers() track by answer.uuid">
                </select>

<!--            <input ng-switch-when="autocomplete" concept-autocomplete source="getValues"
                        class="form-control" concept="observation.value" concept-change="observation.onValueChanged()">
                </input>
 -->
                <input ng-switch-when="autocomplete" type='hidden' ui-select2="selectOptions"
                        class="form-control" ng-model="observation.value" ng-change="observation.onValueChanged()">
                </input>

                <span ng-switch-default class="form-control">
                    The concept data type '{{$parent.observation.getDataTypeName()}}' is not supported yet.
                </span>
            </div>
        </fieldset>

    <fieldset ng-if="observation.isGroup()" class="hasLegend">
        <legend class="mylegend"><strong>{{observation.label}}</strong></legend>
        <div class="form-group">
            <div class="form-field form-field-group" ng-repeat="member in observation.groupMembers">
                <show-concept observation="member"></show-concept>
            </div>
        </div>
    </fieldset>
</div>