<div class="treatment">
    <form name="treatmentForm">
        <div class="table">
            <div class="row table-header">
                <div class="col col1">Drug Name*</div>
                <div class="col col2">Strength*</div>
                <div class="col col3"># per Dosage*</div>
                <div class="col col4">Dosage Frequency*</div>
                <div class="col col5">Dosage Instructions*</div>
                <div class="col col6"># of Days*</div>
                <div class="col col7">Notes</div>
            </div>

            <div ng-repeat="drug in selectedDrugs" class="table-body">
                <div class="row">
                    <div class="col col1" >
                        <input ng-model="drug.name" type="text" name="name" value="{{drug.name}}"
                                my-autocomplete="{{ {'src': 'getDrugList', 'responseHandler': 'getDataResults', 'onSelect':'onDrugSelected', 'index' : $index} }}"
                                ng-change="addNewRowIfNotExists($index)">
                    </div>
                    <div class="col col2">
                        <input ng-model="drug.strength" type="text" value={{drug.strength}} readonly=true size="6">
                    </div>
                    <div class="col col3">
                        <input ng-model="drug.numberPerDosage" type="number" name="numberPerDosage"
                                value="{{drug.numberPerDosage}}" ng-required="!drug.empty">
                    </div>
                    <div class="col col4">
                        <span class="select-arrow">
                            <select ng-model="drug.dosageFrequency" ng-options="df.name.name for df in dosageFrequencyAnswers" ng-required="!drug.empty"></select>
                        </span>
                    </div>
                    <div class="col col5">
                        <span class="select-arrow">
                            <select ng-model="drug.dosageInstruction" ng-options="di.name.name for di in dosageInstructionAnswers" ng-required="!drug.empty"></select>
                        </span>
                    </div>
                    <div class="col col6">
                        <input ng-model="drug.numberOfDosageDays" name="numberOfDosageDays"
                               type="number" value="{{drug.numberOfDosageDays}}" ng-required="!drug.empty">
                    </div>
                    <div class="col col7">
                         <button ng-click="drug.notesVisible=!drug.notesVisible">
                             <span ng-class="{'icon-arrow-down':!drug.notesVisible,'icon-arrow-up':drug.notesVisible}"></span>
                         </button>
                    </div>
                </div>
                <div class="row" ng-show="drug.notesVisible">
                    <div class="col">
                        <textarea placeholder="enter notes" ng-model="drug.notes" name="notes"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div><button type="submit">Submit</button></div>
    </form>
</div>
